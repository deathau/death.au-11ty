---
title: My new website (again)  - 11ty+Friendica
date: 2025-09-22T10:33:00.000+10:00
summary: So, I've re-jiggered my website *again*, and moved away from Ghost, back to 11ty, with a Friendica instance along for the ride...
image:
image_alt:
permalink: /b4.0017/
tags:
  - ActivityPub
  - Blog
  - bluesky
  - Cloudflare
  - Development
  - Eleventy
  - 11ty
  - Fediverse
  - Fedilab
  - Friendica
  - Ghost
  - HTML
  - JavaScript
  - JohnnyDecimal
  - omg.lol
  - status.lol
  - some.pics
  - neighbourhood.omg.lol
  - Website
---
# My new website (again) - 11ty+Friendica

So, I've re-jiggered my website *again*, and moved away from Ghost, back to 11ty. As I mused in a [previous blog post](/B4.0016), I wanted a simpler ActivityPub id, and more control over the handle (i.e. the ability to use `death.au` as the preferred username). I already had that in a self-hosted Friendica instance, but if I moved that to my main domain, that would prevent my website from showing up at the main domain. Well, with a little help from Cloudflare, I've managed to work around that.

I wanted to write about what I've set up here. I'll start with the basic part:

## Eleventy static website

I've used 11ty in the past, and I really like the flexibility it gives me in the output. I can keep my pages and articles as simple markdown, or go for an all out html bonanza and 11ty will assemble the pieces and spit out html files (or other kinds of files) for me, so I end up with a collection of files that can just be served on the web in the most basic of manners.

Also, it allows me to set up page metadata for routing. I've got a URL scheme of my own I'm using, very loosely inspired by Johnny Decimal, whereby all my blog posts are at `/b4.xxxx` (where `xxxx` is just an incremental id). I've also got some small portfolio pages (that I still want to expand on) under `cv.yy` and short-form microblog-style posts under `/n.zzzzzzzz`(where `zzzzzzzz` is actually a base 36 encoded timestamp). Alongside some other things like a summary and featured images (if applicable) I have a lot of control, with very little markup.

Setting up hosting for the pages is simple on Cloudflare. I set up a pages project pointing at my 11ty repo, tell it what command to use to build and what folder the resulting files will be in to upload and now every time I commit and push, my website is automatically built and published. I'm already using Cloudflare's DNS, so it's trivial to point https://www.death.id.au to this pages project and my website is good to go.

## Friendica for the Fediverse

As stated above, I was already hosting a Friendica instance as my primary window into the Fediverse. I have it set up in a docker container (via docker compose) on a webserver I'm paying for, behind a reverse proxy. With that all set up it was surprisingly easy to add a route for the reverse proxy to serve up Friendica on https://death.id.au. To reconfigure Friendica itself for the new domain, there's just a command that needs to be run in a console to update the database and send information out about the new domain. And because I'm still hosting it on the old domain as well, I shouldn't be losing anything coming in, even if my followers' details don't get updated right away.

Friendica is an amazing piece of software. Not only does it federate with other ActivityPub services like Mastodon, it also supports "Groups" to follow Lemmy boards, there's a plugin for BlueSky, it supports OStatus and diaspora (not that I follow anyone on those protocols at the moment), it even supports following basic RSS feeds; all in the same interface. On top of all that, it even has Mastodon-compatible API endpoints, meaning I can use most Mastodon apps/clients to interface with it, including my favourite app, Fedilab.

I have my instance set up as a single-user instance, which basically just means that the home page redirects to my Friendica profile page, rather than login/sign up. But that's not really want I wanted for my root domain name. I wanted it to point to my website. So how can I get Friendica to work with my static website? I don't think I can. But I *can* work around it...

## Cloudflare workers to serve them both

So, as outlined above, I have my static website set up at https://www.death.id.au, and my Friendica instance set up at https://death.id.au. Cloudflare is already hosting my static website for free, and I can also set up "workers" for free as well. Workers is, in Cloudflare's own words, "A serverless platform for building, deploying, and scaling apps across Cloudflare's global network...".

The upshot is, I have set up a worker that intercepts all requests to https://death.id.au. I've got some basic javascript code to check against a list of regular expressions for the paths I've used in my static website and if it matches one of them, return the data from https://www.death.id.au instead. This has potential to lead to conflicts; if a URL on my static website matches one on Friendica, it's going to prioritise my static site instead. But my site's pretty basic, I think it should be fine.

And now, like magic, https://death.id.au/ will serve up my static website, https://death.id.au/now/ should serve my now page, etc. etc. Meanwhile, https://death.id.au/profile/death.au will serve up my profile page on Friendica and, most importantly, any and all ActivityPub, webfinger, API calls, etc will be served on Friendica and my social handle of `@death.au@death.id.au` is all working fine. The best of both worlds!

## Omg.lol  - How does this fit in?

A previous version of my website was built on the omg.lol platform. That place is great, and I plan to use it well into the future. But for me to have the control I wanted over this setup, I had to abandon weblog.lol, the blogging service provided by omg.lol. However, I am still heavily utilizing other aspects of the service. I've decided that most, if not all, of the images I'm using on my website are hosted at some.pics. I have plans and ideas to perhaps integrate the omg.lol provided profile and now pages into my website. They are, after all, managed by markdown. I just have to figure out how to trigger the data to be dumped into my github repository when the data changes.

But the biggest part I'm using at the moment is status.lol for microblogging. It's just simple and fun. You write a message (less than 500 characters), choose an emoji to display alongside it, and send it out. There's no likes or anything on the platform, but there is a checkbox to also post the status to Mastodon. As Friendica has Mastodon-compatible APIs, this works on Friendica, too. Status.lol also supports webhooks, meaning whenever I post a status, I can get this sent to an arbitrary URL.

So, I set up another Cloudflare Worker to accept the data from status.lol, format an appropriate markdown file and push that into my repository. That triggers a new build of the website and within seconds, that status is also visible on my website!

## The future

I am very happy with how all this turned out. There's nothing I love more than tinkering, and the nature of this setup allows me endless possibilities for tinkering. I have Fediverse "integration" via some javascript I wrote which fetches interaction data on articles and posts from Friendica, and allows someone to "log in" with their ActivityPub handle, and if the script can obtain a valid sharing URL, provides the ability to link directly to posts and statuses on your own instance for replying, liking, boosting, etc. As mentioned earlier, I also want to integrate omg.lol's profile and now page functionality to make it easy to modify those pages through either omg.lol or my [neighbourhood.omg.lol](https://neighbourhood.omg.lol) app without having to manually check out and push a git repository.

I probably want to look into a headless CMS in the future, but I can also manage my blog posts and pages through Obsidian, as they're all basically in Markdown anyway. I set up a synced vault in my content folder, so I can edit blog posts and pages in Obsidian, on my mobile or anywhere, and then when I'm back at my computer I can review, update some metadata and then push the markdown into my git repository to be published on my website.

Most importantly, I think this setup is pretty stable, and most importantly, fun to tinker with. My biggest hurdle is actually just thinking up things to write about in the first place ðŸ˜…
